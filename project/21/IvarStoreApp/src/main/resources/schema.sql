CREATE SCHEMA IF NOT EXISTS PUBLIC;

CREATE TABLE IF NOT EXISTS PUBLIC.CUSTOMER (
    CUSTOMER_ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
    FIRST_NAME VARCHAR(255) NOT NULL,
    LAST_NAME VARCHAR(255) NOT NULL,
    EMAIL VARCHAR(255) NOT NULL,
    PASSWORD VARCHAR(255) NOT NULL,
    PHONE_NUMBER VARCHAR(255),
    ADDRESS VARCHAR(255),
    CITY VARCHAR(255),
    ZIP_CODE VARCHAR(255),
    PRIMARY KEY (CUSTOMER_ID)
);

CREATE TABLE IF NOT EXISTS PUBLIC.ORDER (
    ORDER_ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
    ORDER_DATE TIMESTAMP NOT NULL,
    ORDER_TOTAL DECIMAL(10,2) NOT NULL,
    ORDER_STATUS VARCHAR(255) NOT NULL,
    CUSTOMER_ID BIGINT NOT NULL,
    PRIMARY KEY (ORDER_ID),
    FOREIGN KEY (CUSTOMER_ID) REFERENCES PUBLIC.CUSTOMER(CUSTOMER_ID) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS PUBLIC.PRODUCT (
    PRODUCT_ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
    PRODUCT_NAME VARCHAR(255) NOT NULL,
    DESCRIPTION VARCHAR(255),
    PRICE DOUBLE PRECISION NOT NULL,
    QUANTITY_IN_STOCK INTEGER NOT NULL,
    PRIMARY KEY (PRODUCT_ID)
);

CREATE TABLE IF NOT EXISTS PUBLIC.ORDER_PRODUCT (
    ORDER_ID BIGINT NOT NULL,
    PRODUCT_ID BIGINT NOT NULL,
    PRIMARY KEY (ORDER_ID, PRODUCT_ID),
    FOREIGN KEY (ORDER_ID) REFERENCES PUBLIC.ORDER(ORDER_ID) ON DELETE CASCADE,
    FOREIGN KEY (PRODUCT_ID) REFERENCES PUBLIC.PRODUCT(PRODUCT_ID) ON DELETE CASCADE
);